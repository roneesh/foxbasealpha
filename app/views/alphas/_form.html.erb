<%= form_for(@alpha) do |f| %>
  <% if @alpha.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@alpha.errors.count, "error") %> prohibited this alpha from being saved:</h2>

      <ul>
      <% @alpha.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label(:isprivate, "Make Alpha Private") %>
    <%= f.radio_button(:isprivate, true) %>
    <%= f.label(:isprivate, "Make Alpha Public") %>
    <%= f.radio_button(:isprivate, false) %>
  </div>

  <div class="field">
    <%= f.label(:alpha_lat, "Alpha's source Latitude") %>
    <%= f.text_field :alpha_lat %>
    <%= f.label(:alpha_lng, "Alpha's source Longitude") %>
    <%= f.text_field :alpha_lng %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<script>

function success(position) {
  var lat = document.getElementById('alpha_alpha_lat');
  var lng = document.getElementById('alpha_alpha_lng')
  var acc = document.getElementById('accuracy')
  lat.value = position.coords.latitude;
  lng.value = position.coords.longitude;
  acc.innerHTML = "Accurate to " + position.coords.accuracy + " meters";
}

function error(msg) {
  var s = document.querySelector('#status');
  s.innerHTML = typeof msg == 'string' ? msg : "failed";
  s.className = 'fail';
}

if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(success, error);
} else {
  error('not supported');
}

</script>